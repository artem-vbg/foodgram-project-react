# Foodgram

[![foodgram_workflow](https://github.com/artem-vbg/foodgram-project-react/actions/workflows/foodgram_workflow.yml/badge.svg)](https://github.com/artem-vbg/foodgram-project-react/actions/workflows/foodgram_workflow.yml)

# Проект запущен и доступен по адресу [http://51.250.104.214].

## Стек: 
Python 3, Django 3, Django REST Framework, Docker, PostgreSQL, Simple-JWT, GIT.

## Описание:
Cайт Foodgram - онлайн-сервис, на котором пользователи могут публиковать рецепты, подписываться на публикации других пользователей, добавлять понравившиеся рецепты в список «Избранное», а перед походом в магазин скачивать сводный список продуктов, необходимых для приготовления одного или нескольких выбранных блюд. Проект использует базу данных PostgreSQL. Проект запускается в трёх контейнерах (nginx, PostgreSQL и Django) (контейнер frontend используется лишь для подготовки файлов) через docker-compose на сервере. Образ с проектом загружается на Docker Hub.

## Пользовательские роли

### Гость (неавторизованный пользователь)

Что могут делать неавторизованные пользователи:

- Создать аккаунт.
- Просматривать рецепты на главной.
- Просматривать отдельные страницы рецептов.
- Просматривать страницы пользователей.
- Фильтровать рецепты по тегам.

### Авторизованный пользователь

Что могут делать авторизованные пользователи:

- Входить в систему под своим логином и паролем.
- Выходить из системы (разлогиниваться).
- Менять свой пароль.
- Создавать/редактировать/удалять собственные рецепты
- Просматривать рецепты на главной.
- Просматривать страницы пользователей.
- Просматривать отдельные страницы рецептов.
- Фильтровать рецепты по тегам.
- Работать с персональным списком избранного: добавлять в него рецепты или удалять их, просматривать свою страницу избранных рецептов.
- Работать с персональным списком покупок: добавлять/удалять любые рецепты, выгружать файл со количеством необходимых ингридиентов для рецептов из списка покупок.
- Подписываться на публикации авторов рецептов и отменять подписку, просматривать свою страницу подписок.

### Администратор

Администратор обладает всеми правами авторизованного пользователя. Плюс к этому он может:

- изменять пароль любого пользователя,
- создавать/блокировать/удалять аккаунты пользователей,
- редактировать/удалять любые рецепты,
- добавлять/удалять/редактировать ингредиенты.
- добавлять/удалять/редактировать теги.


## Ресурсы API Foodgram

- Ресурс auth: аутентификация.
- Ресурс users: пользователи.
- Ресурс tags: получение данных тега или списка тегов рецепта.
- Ресурс recipes: создание/редактирование/удаление рецептов, а также получение списка рецептов или данных о рецепте.
- Ресурс shopping_cart: добавление/удаление рецептов в список покупок.
- Ресурс download_shopping_cart: cкачать файл со списком покупок.
- Ресурс favorite: добавление/удаление рецептов в избранное пользователя.
- Ресурс subscribe: добавление/удаление пользователя в подписки.
- Ресурс subscriptions: возвращает пользователей, на которых подписан текущий пользователь. В выдачу добавляются рецепты.
- Ресурс ingredients: получение данных ингредиента или списка ингредиентов.


## Установка:
Для работы приложения требуется установка на ваш компьютер [Python](https://www.python.org/downloads/), [Docker](https://hub.docker.com/editions/community/docker-ce-desktop-windows), [PostgreSQL](https://postgrespro.ru/windows).

Склонируйте репозиторий на локальную машину:

  `git clone https://github.com/artem-vbg/foodgram-project-react

В папке infra необходимо создать файл .env и заполнить переменные окружения:
  `SECRET_KEY`
  `DB_ENGINE`
  `DB_NAME`
  `POSTGRES_USER`
  `POSTGRES_PASSWORD`
  `DB_HOST`
  `DB_PORT`

Запустите docker-compose:

  `docker-compose up -d`

Применените миграции базы данных:

  `docker-compose exec backend python manage.py migrate --noinput`

Сбор статических файлов, если вдруг статика не подгрузилась:

  `docker-compose exec backend python manage.py collectstatic --no-input`
  

Создаем суперпользователя:

  `docker-compose exec backend python manage.py createsuperuser`

Заполнения базы начальными данными:

  `docker-compose exec backend python manage.py loaddata fixtures.json`

Остановить все запущенные контейнеры:

  `docker-compose down`

Админка доступна по адресу [http://51.250.104.214/admin/].
Email: james_bond@mail.ru
Passsword: rbiBa_me4


Также настроен workflow для автоматического разворачивания на сервере.

### Разработчик проекта

Автор: Artem Cherepan 
GitHub accaunt: https://github.com/artem-vbg
